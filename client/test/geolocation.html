<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>根据经纬度获取地址信息</title>
</head>
<body>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=8z63nTSBBiK7k0sVVZ77rHaaRgMszV2P"></script>

<script type="text/javascript" src="../js/libs/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../js/libs/hmac-sha1.js"></script>

<script>
    function geoFindMe() {

        // 百度地图API功能

        //地图初始化
        var map = new BMap.Map("allmap");

        //GPS坐标转换成百度坐标
        var convertor = new BMap.Convertor();
        var pointArr = [];
        //坐标转换完之后的回调函数
        var translateCallback = function (data) {
            if (data.status === 0) {
                var point = data.points[0];
                var gc = new BMap.Geocoder();

                gc.getLocation(point, function (rs) {
                    var addressComponents = rs.addressComponents;
                    // alert(addComp.province + ", " + addComp.city + ", " + addComp.district + ", " + addComp.street + ", " + addComp.streetNumber);
                });
            }
        }


        if (!navigator.geolocation) {
            console.log('Geolocation is not supported by your browser');
            return;
        }

        function success(position) {
            //GPS坐标
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            var ggPoint = new BMap.Point(longitude, latitude);
            pointArr.push(ggPoint);

            convertor.translate(pointArr, 1, 5, translateCallback)
        }

        function error() {
            console.log("Unable to retrieve your location");
        }


        navigator.geolocation.getCurrentPosition(success, error);
    }

    geoFindMe();




</script>
</body>
</html>